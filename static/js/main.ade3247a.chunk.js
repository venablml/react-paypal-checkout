(this["webpackJsonpreact-paypal-checkout"]=this["webpackJsonpreact-paypal-checkout"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(12),i=n.n(o),r=(n(32),n(33),n(11)),s=n(2),l=n(1),u=function(){return Object(a.useEffect)((function(){console.log("Login with paypal"),window.paypal.use(["login"],(function(e){e.render({appid:"AStVxVYVevg9Opp0E0XVkUfOBKOvPJ9lh6psz2178uR8fiyzx9V6Tu8iceWMIvEo9QDuM-5a3EHizASm",authend:"sandbox",scopes:"openid profile email address https://uri.paypal.com/services/paypalattributes",containerid:"lippButton",responseType:"code",locale:"en-us",buttonType:"LWP",buttonShape:"pill",buttonSize:"lg",fullPage:"true",returnurl:"https://venablml.github.io/react-paypal-checkout/"})}))})),Object(l.jsx)("div",{children:Object(l.jsx)("span",{id:"lippButton"})})},p=n(8),d=n.n(p),h={product_id:"PROD-3EE93122GD2383205",name:"HC Contract 122121",description:"Something cool",status:"ACTIVE",billing_cycles:[{frequency:{interval_unit:"MONTH",interval_count:1},tenure_type:"REGULAR",sequence:1,total_cycles:12,pricing_scheme:{fixed_price:{value:"3",currency_code:"USD"}}}],payment_preferences:{auto_bill_outstanding:!0,setup_fee_failure_action:"CONTINUE",payment_failure_threshold:3},taxes:{percentage:"10",inclusive:!0}},b={plan_id:"P-76F46997MD275952DMC7AHGI",start_time:"2021-06-10T15:32:00Z",subscriber:{name:{given_name:"John",surname:"Doe"},email_address:"customer@example.com",shipping_address:{name:{full_name:"John Doe"},address:{address_line_1:"2211 N First Street",address_line_2:"Building 17",admin_area_2:"San Jose",admin_area_1:"CA",postal_code:"95131",country_code:"US"}}},application_context:{brand_name:"AON",locale:"en-US",shipping_preference:"SET_PROVIDED_ADDRESS",user_action:"SUBSCRIBE_NOW",payment_method:{payer_selected:"PAYPAL",payee_preferred:"IMMEDIATE_PAYMENT_REQUIRED"},return_url:"https://venablml.github.io/react-paypal-checkout/done",cancel_url:"https://venablml.github.io/react-paypal-checkout/cancel"}},j=function(){d.a.post("https://api-m.sandbox.paypal.com/v1/billing/plans",h,{headers:{Authorization:"Bearer A21AALa4G_rgZZ8kPhCdmGStS0TllHPjcK2Sii8oDqIuhhnLl4ar42IGLwyoKJ5SRBC5HtPssoj1GYM2S8f-nlgf9PgRIGSmA"}}).then((function(e){return console.log("data ",e)})).catch((function(e){return console.error("Error creating plan: ",e)}))},f=function(){d.a.post("https://api-m.sandbox.paypal.com/v1/billing/subscriptions",b,{headers:{Authorization:"Bearer A21AALa4G_rgZZ8kPhCdmGStS0TllHPjcK2Sii8oDqIuhhnLl4ar42IGLwyoKJ5SRBC5HtPssoj1GYM2S8f-nlgf9PgRIGSmA"}}).then((function(e){return console.log("data ",e)})).catch((function(e){return console.error("Error creating plan: ",e)}))},m=function(){return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:j,children:"Create plan"})}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{onClick:f,children:"Subscribe"})})]})},_=n(13);var O=function(){var e,t=Object(a.useState)(null),n=Object(_.a)(t,2),o=n[0],r=n[1],u=Object(a.useState)(null),p=Object(_.a)(u,2),h=(p[0],p[1]),b=Object(a.useState)(!1),j=Object(_.a)(b,2),f=j[0],m=j[1],O=new URLSearchParams(Object(s.f)().search).get("code");Object(a.useEffect)((function(){if(O){var t=document.createElement("script");t.src="https://www.paypal.com/sdk/js?client-id=AStVxVYVevg9Opp0E0XVkUfOBKOvPJ9lh6psz2178uR8fiyzx9V6Tu8iceWMIvEo9QDuM-5a3EHizASm",t.setAttribute("data-namespace","paypal2"),t.addEventListener("load",(function(){return m(!0)})),document.body.appendChild(t),f&&setTimeout((function(){console.log("Loading window paypal"),e=window.paypal2.Buttons.driver("react",{React:c.a,ReactDOM:i.a})}))}})),Object(a.useEffect)((function(){O&&(console.log("Get access code"),function(e){var t=window.btoa("AStVxVYVevg9Opp0E0XVkUfOBKOvPJ9lh6psz2178uR8fiyzx9V6Tu8iceWMIvEo9QDuM-5a3EHizASm:EFzxa_5522GaPABkWP17u9yX3MAh8FHK_66orbNK1EOgwzEx0h6uGOmrSKG7vAc15KhDrTRJMjA8j9ar"),n=new URLSearchParams;return n.append("grant_type","authorization_code"),n.append("code",e),d.a.post("https://api-m.sandbox.paypal.com/v1/oauth2/token",n,{headers:{Authorization:"Basic "+t}})}(O).then((function(e){console.log("data -",e.data),r(e.data.access_token)})))}),[O]),Object(a.useEffect)((function(){null!=o&&(console.log("Get user info now"),d.a.get("https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo?schema=paypalv1.1",{headers:{Authorization:"Bearer "+o,"Content-type":"application/json"}}).then((function(e){console.log("USer info = ",e.data),h(e.data)})))}),[o]);var g=null;return g=f&&e?Object(l.jsx)(e,{createOrder:function(e,t){return function(e,t){return t.order.create({purchase_units:[{amount:{value:"0.01"}}]})}(0,t)},onApprove:function(e,t){return function(e,t){return t.order.capture()}(0,t)}}):Object(l.jsx)("div",{children:"Please log in"}),Object(l.jsx)("main",{children:g})};var g=function(){return Object(l.jsx)(r.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(r.b,{to:"/login",children:"Login"}),Object(l.jsx)(r.b,{to:"/admin",children:"Admin"}),Object(l.jsxs)(s.c,{children:[Object(l.jsx)(s.a,{path:"/login",children:Object(l.jsx)(u,{})}),Object(l.jsx)(s.a,{path:"/admin",children:Object(l.jsx)(m,{})}),Object(l.jsx)(s.a,{path:"/",children:Object(l.jsx)(O,{})})]})]})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root")),v()}},[[58,1,2]]]);
//# sourceMappingURL=main.ade3247a.chunk.js.map